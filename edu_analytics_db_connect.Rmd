---
title: "Education Analytics Admissions Screening Project"
subtitle: "Connection to edu_analytics database"
author: "Jacqueline Gutman, Suvam Paul"
date: 'Last updated: `r format(Sys.Date(), "%B %d, %Y") ` '
output:
  html_document:
    toc: yes
    toc_depth: '4'
  html_notebook:
    highlight: tango
    theme: cosmo
    toc: yes
    toc_depth: 4
---

```{r, message=FALSE}
library(tidyverse)
library(knitr)
library(RMySQL)
library(yaml)

sessionInfo()$otherPkgs %>% 
  map_chr(function(pkg) paste(pkg$Package, pkg$Version)) %>%
  cat(sep = "\n")
opts_chunk$set(message = FALSE, warning = FALSE, comment = "   ",
            cache = TRUE, autodep = TRUE, cache.comments = FALSE)

```

```{r, echo=FALSE}
credentials_path <- "/Volumes/IIME/EDS/data/admissions/db_credentials/"
credentials_file <- "owner_credentials.yaml"
credentials <- paste0(credentials_path, credentials_file) %>% 
  yaml::yaml.load_file()

# edu_db_con <- dbConnect(MySQL(), 
#         user = credentials$user, 
#         password = credentials$password, 
#         dbname = credentials$dbname, 
#         host = credentials$host,
#         port = credentials$port)

edu_db <- src_mysql(credentials$dbname,
                    host = credentials$host,
                    port = credentials$port,
                    user = credentials$user,
                    password = credentials$password)

rm(credentials)
```

```{r}
(table_names <- db_list_tables(edu_db$con))
all_applicants_2013 <- tbl(edu_db, table_names[[1]]) %>% collect()

# db_info <- dbGetInfo(edu_db_con)
# edu_db <- src_sql("mysql", edu_db_con, info = db_info)
```

```{r}
dbDisconnect(edu_db$con)
```

